<p>Today 22 July 2014 Oracle Corp. has released patchset 12.1.0.2 for Oracle Database 12c release 1. According to <a href="https://blogs.oracle.com/UPGRADE/entry/oracle_database_12_1_0">Mike Dietrich</a>:</p>
<p><i><br />
Three things important to mention:</p>
<li>It is a full release - no need to get Oracle Database 12.1.0.1
</li>
<li>Even though it is a patch set it will be available on OTN and eDelivery - and Oracle Database 12.1.0.1 will be removed instantly
</li>
<li>For now it is an Enterprise Edition install only - SE and SE One may follow later.<br />
Please see MOS Note:1905806.1 for further details.
</li>
<p></i></p>
<h2>Installation of Oracle Database 12.1.0.2</h2>
<p>For this installation I have used Oracle Linux 6.4 64-bit machine where Oracle 12.1.0.1 is already installed<br />
(this is a VirtualBox machine still running 4.3.6). This means I did not had to install needed RPM, configure the kernel and create oracle account: this is already done (see <a href="http://pierreforstmanndotcom.wordpress.com/2013/06/27/how-to-install-oracle-12-1-in-silent-mode/"> Oracle 12.1.0.1 installation in silent mode</a> for more details).</p>
<p>The Linux account I have used is oracle:</p>
<pre>
$ id
uid=54321(oracle) gid=54321(oinstall) groups=54321(oinstall),54322(dba)
</pre>
<p>First download from OTN and upload to your Linux machine the 2 zip files:</p>
<pre>
$ ls -al linuxamd64_12102_database_*
-rw-r--r-- 1 oracle oinstall 1673544724 Jul 22 20:48 linuxamd64_12102_database_1of2.zip
-rw-r--r-- 1 oracle oinstall 1014530602 Jul 22 20:51 linuxamd64_12102_database_2of2.zip
</pre>
<p>Unzip the 2 files:</p>
<pre>
$ unzip linuxamd64_12102_database_1of2.zip
$ unzip linuxamd64_12102_database_2of2.zip
</pre>
<p>Create the new Oracle Home directory:</p>
<pre>
$ mkdir -p /u01/app/oracle/product/12.1.0.2/db_1
</pre>
<p>Create the silent script installation for Oracle Universal Installer (since Oracle 12.1.0.1 is already installed I didn't need to create the Oracle inventory):</p>
<pre>
$ cat di2.ksh
cd /stage/database
export DISTRIB=`pwd`
./runInstaller -silent \
   -responseFile $DISTRIB/response/db_install.rsp      \
   oracle.install.option=INSTALL_DB_SWONLY             \
   UNIX_GROUP_NAME=oinstall                            \
   INVENTORY_LOCATION=/u01/app/oracle/oraInventory     \
   SELECTED_LANGUAGES=en                               \
   ORACLE_HOME=/u01/app/oracle/product/12.1.0.2/db_1   \
   ORACLE_BASE=/u01/app/oracle                         \
   oracle.install.db.InstallEdition=EE                 \
   oracle.install.db.isCustomInstall=false             \
   oracle.install.db.DBA_GROUP=dba                     \
   oracle.install.db.OPER_GROUP=dba                    \
   oracle.install.db.BACKUPDBA_GROUP=dba               \
   oracle.install.db.DGDBA_GROUP=dba                   \
   oracle.install.db.KMDBA_GROUP=dba                   \
   SECURITY_UPDATES_VIA_MYORACLESUPPORT=false          \
   DECLINE_SECURITY_UPDATES=true
</pre>
<p>Launch the installation script and wait for the message <u>"The installation of Oracle Database 12c was successful"</u>:</p>
<pre>
$./di2.ksh
Starting Oracle Universal Installer...

Checking Temp space: must be greater than 500 MB.   Actual 14398 MB    Passed
Checking swap space: must be greater than 150 MB.   Actual 3963 MB    Passed
Preparing to launch Oracle Universal Installer from /tmp/OraInstall2014-07-22_09-30-00PM. 
Please wait ...$ You can find the log of this install session at:
 /u01/app/oracle/oraInventory/logs/installActions2014-07-22_09-30-00PM.log
$ The installation of Oracle Database 12c was successful.
Please check '/u01/app/oracle/oraInventory/logs/silentInstall2014-07-22_09-30-00PM.log' for more details.

As a root user, execute the following script(s):
        1. /u01/app/oracle/product/12.1.0.2/db_1/root.sh



Successfully Setup Software.
</pre>
<p>Connect as root to run <b>root.sh</b>:</p>
<pre>
#  /u01/app/oracle/product/12.1.0.2/db_1/root.sh
Check /u01/app/oracle/product/12.1.0.2/db_1/install/root_ol6twcn1.localdomain_2014-07-22_21-37-14.log for the output of root script
# cat /u01/app/oracle/product/12.1.0.2/db_1/install/root_ol6twcn1.localdomain_2014-07-22_21-37-14.log
Performing root user operation.

The following environment variables are set as:
    ORACLE_OWNER= oracle
    ORACLE_HOME=  /u01/app/oracle/product/12.1.0.2/db_1
   Copying dbhome to /usr/local/bin ...
   Copying oraenv to /usr/local/bin ...
   Copying coraenv to /usr/local/bin ...

Entries will be added to the /etc/oratab file as needed by
Database Configuration Assistant when a database is created
Finished running generic part of root script.
Now product-specific root actions will be performed.
#
</pre>
<p>Switch to oracle account and check SQL*Plus version:</p>
<pre>
$ export ORACLE_HOME=/u01/app/oracle/product/12.1.0.2/db_1
$ PATH=$ORACLE_HOME/bin:$PATH
$ sqlplus -v

SQL*Plus: Release 12.1.0.2.0 Production
</pre>
<h2>Create a 12.1.0.2 container database</h2>
<p>Create the directories for database files and Fast Recovery Area on local file systems (connect as root and give right privileges to Oracle software owner account):</p>
<pre>
# mkdir /u01/oradata
# chown oracle:dba /u01/oradata
# mkdir -p /u02/fra
# chown oracle:dba /u02/fra
</pre>
<p>Create the script for DBCA to create a container database with 2 pluggable databases:</p>
<pre>
$ cat crdb2.ksh
set -x
dbca \
 -silent \
 -createDatabase \
 -templateName General_Purpose.dbc   \
 -gdbName cdb2 \
 -createAsContainerDatabase true \
 -numberOfPdbs 2 \
 -pdbName pdb \
 -pdbadminUsername pdba \
 -pdbadminPassword oracle12c \
 -SysPassword oracle12c \
 -SystemPassword oracle12c \
 -emConfiguration NONE \
 -datafileDestination /u01/oradata\
 -asmSysPassword oracle12c \
 -characterSet AL32UTF8 \
 -totalMemory 1024 \
 -recoveryAreaDestination /u02/fra
</pre>
<p>Launch the script (note this takes more time on my configuration than to install Oracle Database: be patient):</p>
<pre>
$ ./crdb2.ksh
++ dbca -silent -createDatabase -templateName General_Purpose.dbc -gdbName cdb2 -createAsContainerDatabase true -numberOfPdbs 2 -pdbName pdb -pdbadminUsername pdba -pdbadminPassword oracle12c -SysPassword oracle12c -SystemPassword oracle12c -emConfiguration NONE -datafileDestination /u01/oradata -asmSysPassword oracle12c -characterSet AL32UTF8 -totalMemory 1024 -recoveryAreaDestination /u02/fra
Copying database files
1% complete
2% complete
8% complete
13% complete
19% complete
27% complete
Creating and starting Oracle instance
29% complete
32% complete
33% complete
34% complete
38% complete
42% complete
43% complete
45% complete
Completing Database Creation
48% complete
51% complete
53% complete
62% complete
70% complete
72% complete
Creating Pluggable Databases
78% complete
83% complete
100% complete
Look at the log file "/u01/app/oracle/cfgtoollogs/dbca/cdb2/cdb2.log" for further details.
</pre>
<p>Check DBCA log file:</p>
<pre>
cat "/u01/app/oracle/cfgtoollogs/dbca/cdb2/cdb2.log"

Unique database identifier check passed.

/ has enough space. Required space is 8430 MB , available space is 9068 MB.
File Validations Successful.
Copying database files
DBCA_PROGRESS : 1%
DBCA_PROGRESS : 2%
DBCA_PROGRESS : 8%
DBCA_PROGRESS : 13%
DBCA_PROGRESS : 19%
DBCA_PROGRESS : 27%
Creating and starting Oracle instance
DBCA_PROGRESS : 29%
DBCA_PROGRESS : 32%
DBCA_PROGRESS : 33%
DBCA_PROGRESS : 34%
DBCA_PROGRESS : 38%
DBCA_PROGRESS : 42%
DBCA_PROGRESS : 43%
DBCA_PROGRESS : 45%
Completing Database Creation
DBCA_PROGRESS : 48%
DBCA_PROGRESS : 51%
DBCA_PROGRESS : 53%
DBCA_PROGRESS : 62%
DBCA_PROGRESS : 70%
DBCA_PROGRESS : 72%
Creating Pluggable Databases
DBCA_PROGRESS : 78%
DBCA_PROGRESS : 83%
DBCA_PROGRESS : 100%
Database creation complete. For details check the logfiles at:
 /u01/app/oracle/cfgtoollogs/dbca/cdb2.
Database Information:
Global Database Name:cdb2
System Identifier(SID):cdb2
</pre>
<p>Check <b>/etc/oratab</b>:</p>
<pre>
$ grep cdb2 /etc/oratab
cdb2:/u01/app/oracle/product/12.1.0.2/db_1:N
</pre>
<p>Check that you can connect to new database and check for In Memory database parameters and options:</p>
<pre>
$ sqlplus / as sysdba @c122

SQL*Plus: Release 12.1.0.2.0 Production on Tue Jul 22 22:09:38 2014

Copyright (c) 1982, 2014, Oracle.  All rights reserved.


Connected to:
Oracle Database 12c Enterprise Edition Release 12.1.0.2.0 - 64bit Production
With the Partitioning, OLAP, Advanced Analytics and Real Application Testing options

SYS@cdb2&gt;set linesize 132
SYS@cdb2&gt;column name format a60
SYS@cdb2&gt;column parameter format a50
SYS@cdb2&gt;column value format a10
SYS@cdb2&gt;--
SYS@cdb2&gt;select * from v$version;

BANNER                                                                               CON_ID
-------------------------------------------------------------------------------- ----------
Oracle Database 12c Enterprise Edition Release 12.1.0.2.0 - 64bit Production              0
PL/SQL Release 12.1.0.2.0 - Production                                                    0
CORE    12.1.0.2.0      Production                                                                0
TNS for Linux: Version 12.1.0.2.0 - Production                                            0
NLSRTL Version 12.1.0.2.0 - Production                                                    0

SYS@cdb2&gt;show parameter inmemory

NAME                                 TYPE        VALUE
------------------------------------ ----------- ------------------------------
inmemory_clause_default              string
inmemory_force                       string      DEFAULT
inmemory_max_populate_servers        integer     0
inmemory_query                       string      ENABLE
inmemory_size                        big integer 0
inmemory_trickle_repopulate_servers_ integer     1
percent
optimizer_inmemory_aware             boolean     TRUE
SYS@cdb2&gt;select * from v$option where parameter like '%Mem%';

PARAMETER                                          VALUE          CON_ID
-------------------------------------------------- ---------- ----------
In-Memory Column Store                             TRUE                0
In-Memory Aggregation                              TRUE                0

SYS@cdb2&gt;exit
Disconnected from Oracle Database 12c Enterprise Edition Release 12.1.0.2.0 - 64bit Production
With the Partitioning, OLAP, Advanced Analytics and Real Application Testing options
</pre>
<p>So far so good.</p>
