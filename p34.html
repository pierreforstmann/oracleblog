<p>This post documents how to install a 2-node Oracle RAC cluster with Oracle 12.1.0.2 on Oracle Linux 7.1 (OL7) with VirtualBox (VBOX) 4.3.26 on Windows 8.1.</p>
<p><a href="https://pierreforstmanndotcom.wordpress.com/2015/04/08/how-to-install-oracle-rac-12-1-0-2-in-silent-mode-on-oracle-linux-7-1-with-virtualbox-part-1/">Part 1</a> details Linux installation and configuration and part 2 details Oracle software installation (Grid Infrastructure (GI), Oracle Database) and database creation.</p>
<p>In this article GIMR stands for Grid Infrastructure Management Repository.</p>
<p>Disclaimer: this is only an example that can be used to setup a lab or test system: it is not designed to be used for production purpose.</p>
<h2>Grid Infrastructure silent installation</h2>
<p>I have created ORACLE_BASE and ORACLE_HOME target directories on both nodes:</p>
<pre># mkdir -p /u01/app/base
# chown oracle:dba /u01/app/base
# mkdir -p  /u01/app/12.1.0.2/grid
# chown oracle:oinstall /u01/app/12.1.0.2/grid
# chmod -R 775 /u01
</pre>
<p>I have created <b>/etc/oraInst.loc</b> to define Oracle Inventory location on both nodes:</p>
<pre># mkdir  /u01/app/oraInventory
# cat /etc/oraInst.loc
inventory_loc=/u01/app/oraInventory
inst_group=oinstall
# ls -al /u01/app/oraInventory
total 0
drwxr-xr-x 2 root root  6 Apr  6 14:16 .
drwxrwxr-x 5 root root 51 Apr  6 14:16 ..
# chown oracle:oinstall /u01/app/oraInventory
#
</pre>
<p>I have removed my internet box IP address from <b>/etc/resolv.conf</b> so that contents is:</p>
<pre># cat /etc/resolv.conf
nameserver 192.168.56.250
search localdomain
</pre>
<p>This is needed in order to avoid OUI failure:</p>
<pre>[FATAL] [INS-13013] Target environment does not meet some mandatory requirements.
CAUSE: Some of the mandatory prerequisites are not met. See logs for details. 
</pre>
<p>with following message in installation log:</p>
<pre>INFO: Task resolv.conf Integrity: This task checks consistency of file /etc/resolv.conf file across nodes
INFO: Severity:CRITICAL
INFO: OverallStatus:OPERATION_FAILED
</pre>
<p>Note that the same error can also be triggered if cluster node names are not in DNS.</p>
<p>I have created following script to run OUI in silent mode:</p>
<pre>rm -rf /u01/app/oraInventory/*
rm -rf /tmp/Ora*
rm -rf /tmp/deinstall*
rm -rf /tmp/CVU*
cd grid
export DISTRIB=`pwd`
./runInstaller -silent         \
       -responseFile $DISTRIB/response/grid_install.rsp        \
       INVENTORY_LOCATION=/u01/app/oraInventory                \
       SELECTED_LANGUAGES=en                                   \
       oracle.install.option=CRS_CONFIG                        \
       ORACLE_BASE=/u01/app/base/                              \
       ORACLE_HOME=/u01/app/12.1.0.2/grid                      \
       oracle.install.asm.OSDBA=dba                            \
       oracle.install.asm.OSOPER=dba                           \
       oracle.install.asm.OSASM=dba                            \
       oracle.install.crs.config.gpnp.scanName=ol7toc-scan.localdomain \
       oracle.install.crs.config.gpnp.scanPort=1521            \
       oracle.install.crs.config.clusterName=ol7toc            \
       oracle.install.crs.config.gpnp.configureGNS=false       \
       oracle.install.crs.config.clusterNodes=ol7tocn1:ol7tocn1-vip,ol7tocn2:ol7tocn2-vip \
       oracle.install.crs.config.networkInterfaceList=enp0s8:192.168.56.0:1,enp0s9:192.168.43.0:2 \
       oracle.install.crs.config.storageOption=ASM_STORAGE     \
       oracle.install.crs.config.useIPMI=false                 \
       oracle.install.asm.SYSASMPassword=oracle12c              \
       oracle.install.asm.diskGroup.diskDiscoveryString=/dev/asm* \
       oracle.install.asm.diskGroup.name=OCRVD                  \
       oracle.install.asm.diskGroup.disks=/dev/asm-disk1       \
       oracle.install.asm.diskGroup.redundancy=EXTERNAL        \
       oracle.install.asm.monitorPassword=oracle12c            \
       -waitForCompletion                           
</pre>
<p>The above script is using following variables defined in <b>./grid/response/grid_install.rsp</b> response file:</p>
<p>parameter namedescriptionoracle.install.crs.config.gpnp.scanPortMust be to set to TCP port to be used by SCAN listener.</p>
<table border="2">
<tbody>
<tr>
<td>INVENTORY_LOCATION</td>
<td>Directory where Oracle Inventory will be stored. Must match <b>/etc/oraInst.loc</b> contents.</td>
</tr>
<tr>
<td>oracle.install.option</td>
<td>Must be set to CRS_CONFIG for Grid Infrastructure for cluster.</td>
</tr>
<tr>
<td>oracle.install.crs.config.gpnp.scanName</td>
<td>Must be set to DNS alias for the 3 SCAN listener adresses.</td>
</tr>
<tr>
<td>oracle.install.crs.config.clusterName</td>
<td>No dependency for this name. Will be used as PDB name in GIMR database and returned by cemutlo command.</td>
</tr>
<tr>
<td>oracle.install.crs.config.gpnp.configureGNS</td>
<td>Must be set to FALSE to <u>not</u> use Grid Naming Service (GNS).</td>
</tr>
<tr>
<td>oracle.install.crs.config.clusterNodes</td>
<td>Must be set to <i>public-hostname</i>:<i>vip-hostname</i> comma separated host name list (excluding flex ASM case).</td>
</tr>
<tr>
<td>oracle.install.crs.config.networkInterfaceList</td>
<td>Must be set to <i>network-interface</i>:<i>network-interface-subnet</i>:<i>network-interface_type</i> comma separated strings<br />
where <i>network-interface_type</i> must be set to 1 for public interface and to 2 for private interface (interconnect).</td>
</tr>
<tr>
<td>oracle.install.crs.config.storageOption</td>
<td>Set to ASM_STORAGE for OCR and voting disk.</td>
</tr>
<tr>
<td>oracle.install.crs.config.useIPMI</td>
<td>Must be set to FALSE to <u>not</u> use Intelligent Power Management Interface.</td>
</tr>
<tr>
<td>oracle.install.asm.SYSASMPassword</td>
<td>Must be set to SYS password for ASM instance.</td>
</tr>
<tr>
<td>oracle.install.asm.diskGroup.diskDiscoveryString</td>
<td>Used to set ASM instance ASM_DISKSTRING parameter.</td>
</tr>
<tr>
<td>oracle.install.asm.diskGroup.name</td>
<td>Name of ASM disk group used for OCR, voting disk and GIMR database.</td>
</tr>
<tr>
<td>oracle.install.asm.diskGroup.disks</td>
<td>Comma separated ASM disk names list to be used for above ASM disk group.</td>
</tr>
<tr>
<td>oracle.install.asm.diskGroup.redundancy</td>
<td>Disk group redundancy used by above ASM disk group.</td>
</tr>
<tr>
<td>oracle.install.asm.monitorPassword</td>
<td>Must be set to ASMSNMP password for ASM instance.</td>
</tr>
</tbody>
</table>
<p>Running this script has given following output:</p>
<pre>Starting Oracle Universal Installer...

Checking Temp space: must be greater than 415 MB.   Actual 30218 MB    Passed
Checking swap space: must be greater than 150 MB.   Actual 3967 MB    Passed
Preparing to launch Oracle Universal Installer from /tmp/OraInstall2015-04-06_02-29-40PM. Please wait ...[WARNING] [INS-30011] The SYS password entered does not conform to the Oracle recommended standards.
   CAUSE: Oracle recommends that the password entered should be at least 8 characters in length, contain at least 1 uppercase character, 1 lower case character and 1 digit [0-9].
   ACTION: Provide a password that conforms to the Oracle recommended standards.
[WARNING] [INS-30011] The ASMSNMP password entered does not conform to the Oracle recommended standards.
   CAUSE: Oracle recommends that the password entered should be at least 8 characters in length, contain at least 1 uppercase character, 1 lower case character and 1 digit [0-9].
   ACTION: Provide a password that conforms to the Oracle recommended standards.
[WARNING] [INS-41808] Possible invalid choice for OSASM Group.
   CAUSE: The name of the group you selected for the OSASM group is commonly used to grant other system privileges (For example: asmdba, asmoper, dba, oper).
   ACTION: Oracle recommends that you designate asmadmin as the OSASM group.
[WARNING] [INS-41809] Possible invalid choice for OSDBA Group.
   CAUSE: The group name you selected as the OSDBA for ASM group is commonly used for Oracle Database administrator privileges.
   ACTION: Oracle recommends that you designate asmdba as the OSDBA for ASM group, and that the group should not be the same group as an Oracle Database OSDBA group.
[WARNING] [INS-41810] Possible invalid choice for OSOPER Group.
   CAUSE: The group name you selected as the OSOPER for ASM group is commonly used for Oracle Database administrator privileges.
   ACTION: Oracle recommends that you designate asmoper as the OSOPER for ASM group, and that the group should not be the same group as an Oracle Database OSOPER group.
[WARNING] [INS-41813] OSDBA for ASM, OSOPER for ASM, and OSASM are the same OS group.
   CAUSE: The group you selected for granting the OSDBA for ASM group for database access, and the OSOPER for ASM group for startup and shutdown of Oracle ASM, is the same group as the OSASM group, whose members have SYSASM privileges on Oracle ASM.
   ACTION: Choose different groups as the OSASM, OSDBA for ASM, and OSOPER for ASM groups.
[WARNING] [INS-13014] Target environment does not meet some optional requirements.
   CAUSE: Some of the optional prerequisites are not met. See logs for details. /u01/app/oraInventory/logs/installActions2015-04-06_02-29-40PM.log
   ACTION: Identify the list of failed prerequisite checks from the log: /u01/app/oraInventory/logs/installActions2015-04-06_02-29-40PM.log. Then either from the log file or from installation manual find the appropriate configuration to meet the prerequisites and fix it manually.
You can find the log of this install session at:
 /u01/app/oraInventory/logs/installActions2015-04-06_02-29-40PM.log
The installation of Oracle Grid Infrastructure 12c was successful.
Please check '/u01/app/oraInventory/logs/silentInstall2015-04-06_02-29-40PM.log' for more details.

As a root user, execute the following script(s):
        1. /u01/app/12.1.0.2/grid/root.sh

Execute /u01/app/12.1.0.2/grid/root.sh on the following nodes:
[ol7tocn1, ol7tocn2]

Run the script on the local node first. After successful completion, you can start the script in parallel on all other nodes.

Successfully Setup Software.
As install user, execute the following script to complete the configuration.
        1. /u01/app/12.1.0.2/grid/cfgtoollogs/configToolAllCommands RESPONSE_FILE=

        Note:
        1. This script must be run on the same host from where installer was run.
        2. This script needs a small password properties file for configuration assistants that require passwords (refer to install guide documentation).

</pre>
<p>On first cluster node I have run root.sh:</p>
<pre># /u01/app/12.1.0.2/grid/root.sh
Check /u01/app/12.1.0.2/grid/install/root_ol7tocn1.localdomain_2015-04-06_14-45-50.log for the output of root script
#
</pre>
<p>Corresponding log is:</p>
<pre># cat /u01/app/12.1.0.2/grid/install/root_ol7tocn1.localdomain_2015-04-06_14-45-50.log
Performing root user operation.

The following environment variables are set as:
    ORACLE_OWNER= oracle
    ORACLE_HOME=  /u01/app/12.1.0.2/grid
   Copying dbhome to /usr/local/bin ...
   Copying oraenv to /usr/local/bin ...
   Copying coraenv to /usr/local/bin ...


Creating /etc/oratab file...
Entries will be added to the /etc/oratab file as needed by
Database Configuration Assistant when a database is created
Finished running generic part of root script.
Now product-specific root actions will be performed.
Using configuration parameter file: /u01/app/12.1.0.2/grid/crs/install/crsconfig_params
2015/04/06 14:45:52 CLSRSC-4001: Installing Oracle Trace File Analyzer (TFA) Collector.

2015/04/06 14:46:25 CLSRSC-4002: Successfully installed Oracle Trace File Analyzer (TFA) Collector.

2015/04/06 14:46:25 CLSRSC-363: User ignored prerequisites during installation

OLR initialization - successful
  root wallet
  root wallet cert
  root cert export
  peer wallet
  profile reader wallet
  pa wallet
  peer wallet keys
  pa wallet keys
  peer cert request
  pa cert request
  peer cert
  pa cert
  peer root cert TP
  profile reader root cert TP
  pa root cert TP
  peer pa cert TP
  pa peer cert TP
  profile reader pa cert TP
  profile reader peer cert TP
  peer user cert
  pa user cert
2015/04/06 14:47:10 CLSRSC-330: Adding Clusterware entries to file 'oracle-ohasd.service'

CRS-4133: Oracle High Availability Services has been stopped.
CRS-4123: Oracle High Availability Services has been started.
CRS-4133: Oracle High Availability Services has been stopped.
CRS-4123: Oracle High Availability Services has been started.
CRS-2672: Attempting to start 'ora.evmd' on 'ol7tocn1'
CRS-2672: Attempting to start 'ora.mdnsd' on 'ol7tocn1'
CRS-2676: Start of 'ora.mdnsd' on 'ol7tocn1' succeeded
CRS-2676: Start of 'ora.evmd' on 'ol7tocn1' succeeded
CRS-2672: Attempting to start 'ora.gpnpd' on 'ol7tocn1'
CRS-2676: Start of 'ora.gpnpd' on 'ol7tocn1' succeeded
CRS-2672: Attempting to start 'ora.cssdmonitor' on 'ol7tocn1'
CRS-2672: Attempting to start 'ora.gipcd' on 'ol7tocn1'
CRS-2676: Start of 'ora.cssdmonitor' on 'ol7tocn1' succeeded
CRS-2676: Start of 'ora.gipcd' on 'ol7tocn1' succeeded
CRS-2672: Attempting to start 'ora.cssd' on 'ol7tocn1'
CRS-2672: Attempting to start 'ora.diskmon' on 'ol7tocn1'
CRS-2676: Start of 'ora.diskmon' on 'ol7tocn1' succeeded
CRS-2676: Start of 'ora.cssd' on 'ol7tocn1' succeeded

ASM created and started successfully.

Disk Group OCRVD created successfully.

CRS-2672: Attempting to start 'ora.crf' on 'ol7tocn1'
CRS-2672: Attempting to start 'ora.storage' on 'ol7tocn1'
CRS-2676: Start of 'ora.storage' on 'ol7tocn1' succeeded
CRS-2676: Start of 'ora.crf' on 'ol7tocn1' succeeded
CRS-2672: Attempting to start 'ora.crsd' on 'ol7tocn1'
CRS-2676: Start of 'ora.crsd' on 'ol7tocn1' succeeded
CRS-4256: Updating the profile
Successful addition of voting disk d6f0e877483c4f66bffb3c6cab8e9a29.
Successfully replaced voting disk group with +OCRVD.
CRS-4256: Updating the profile
CRS-4266: Voting file(s) successfully replaced
##  STATE    File Universal Id                File Name Disk group
--  -----    -----------------                --------- ---------
 1. ONLINE   d6f0e877483c4f66bffb3c6cab8e9a29 (/dev/asm-disk1) [OCRVD]
Located 1 voting disk(s).
CRS-2791: Starting shutdown of Oracle High Availability Services-managed resources on 'ol7tocn1'
CRS-2673: Attempting to stop 'ora.crsd' on 'ol7tocn1'
CRS-2677: Stop of 'ora.crsd' on 'ol7tocn1' succeeded
CRS-2673: Attempting to stop 'ora.ctssd' on 'ol7tocn1'
CRS-2673: Attempting to stop 'ora.evmd' on 'ol7tocn1'
CRS-2673: Attempting to stop 'ora.storage' on 'ol7tocn1'
CRS-2673: Attempting to stop 'ora.crf' on 'ol7tocn1'
CRS-2673: Attempting to stop 'ora.mdnsd' on 'ol7tocn1'
CRS-2673: Attempting to stop 'ora.gpnpd' on 'ol7tocn1'
CRS-2677: Stop of 'ora.storage' on 'ol7tocn1' succeeded
CRS-2673: Attempting to stop 'ora.asm' on 'ol7tocn1'
CRS-2677: Stop of 'ora.ctssd' on 'ol7tocn1' succeeded
CRS-2677: Stop of 'ora.evmd' on 'ol7tocn1' succeeded
CRS-2677: Stop of 'ora.mdnsd' on 'ol7tocn1' succeeded
CRS-2677: Stop of 'ora.crf' on 'ol7tocn1' succeeded
CRS-2677: Stop of 'ora.gpnpd' on 'ol7tocn1' succeeded
CRS-2677: Stop of 'ora.asm' on 'ol7tocn1' succeeded
CRS-2673: Attempting to stop 'ora.cluster_interconnect.haip' on 'ol7tocn1'
CRS-2677: Stop of 'ora.cluster_interconnect.haip' on 'ol7tocn1' succeeded
CRS-2673: Attempting to stop 'ora.cssd' on 'ol7tocn1'
CRS-2677: Stop of 'ora.cssd' on 'ol7tocn1' succeeded
CRS-2673: Attempting to stop 'ora.gipcd' on 'ol7tocn1'
CRS-2677: Stop of 'ora.gipcd' on 'ol7tocn1' succeeded
CRS-2793: Shutdown of Oracle High Availability Services-managed resources on 'ol7tocn1' has completed
CRS-4133: Oracle High Availability Services has been stopped.
CRS-4123: Starting Oracle High Availability Services-managed resources
CRS-2672: Attempting to start 'ora.mdnsd' on 'ol7tocn1'
CRS-2672: Attempting to start 'ora.evmd' on 'ol7tocn1'
CRS-2676: Start of 'ora.mdnsd' on 'ol7tocn1' succeeded
CRS-2676: Start of 'ora.evmd' on 'ol7tocn1' succeeded
CRS-2672: Attempting to start 'ora.gpnpd' on 'ol7tocn1'
CRS-2676: Start of 'ora.gpnpd' on 'ol7tocn1' succeeded
CRS-2672: Attempting to start 'ora.gipcd' on 'ol7tocn1'
CRS-2676: Start of 'ora.gipcd' on 'ol7tocn1' succeeded
CRS-2672: Attempting to start 'ora.cssdmonitor' on 'ol7tocn1'
CRS-2676: Start of 'ora.cssdmonitor' on 'ol7tocn1' succeeded
CRS-2672: Attempting to start 'ora.cssd' on 'ol7tocn1'
CRS-2672: Attempting to start 'ora.diskmon' on 'ol7tocn1'
CRS-2676: Start of 'ora.diskmon' on 'ol7tocn1' succeeded
CRS-2676: Start of 'ora.cssd' on 'ol7tocn1' succeeded
CRS-2672: Attempting to start 'ora.cluster_interconnect.haip' on 'ol7tocn1'
CRS-2672: Attempting to start 'ora.ctssd' on 'ol7tocn1'
CRS-2676: Start of 'ora.ctssd' on 'ol7tocn1' succeeded
CRS-2676: Start of 'ora.cluster_interconnect.haip' on 'ol7tocn1' succeeded
CRS-2672: Attempting to start 'ora.asm' on 'ol7tocn1'
CRS-2676: Start of 'ora.asm' on 'ol7tocn1' succeeded
CRS-2672: Attempting to start 'ora.storage' on 'ol7tocn1'
CRS-2676: Start of 'ora.storage' on 'ol7tocn1' succeeded
CRS-2672: Attempting to start 'ora.crf' on 'ol7tocn1'
CRS-2676: Start of 'ora.crf' on 'ol7tocn1' succeeded
CRS-2672: Attempting to start 'ora.crsd' on 'ol7tocn1'
CRS-2676: Start of 'ora.crsd' on 'ol7tocn1' succeeded
CRS-6023: Starting Oracle Cluster Ready Services-managed resources
CRS-6017: Processing resource auto-start for servers: ol7tocn1
CRS-6016: Resource auto-start has completed for server ol7tocn1
CRS-6024: Completed start of Oracle Cluster Ready Services-managed resources
CRS-4123: Oracle High Availability Services has been started.
2015/04/06 14:51:31 CLSRSC-343: Successfully started Oracle Clusterware stack

CRS-2672: Attempting to start 'ora.OCRVD.dg' on 'ol7tocn1'
CRS-2676: Start of 'ora.OCRVD.dg' on 'ol7tocn1' succeeded
Preparing packages...
cvuqdisk-1.0.9-1.x86_64
2015/04/06 14:53:01 CLSRSC-325: Configure Oracle Grid Infrastructure for a Cluster ... succeeded

</pre>
<p>I have run root.sh on cluster node 2:</p>
<pre># /u01/app/12.1.0.2/grid/root.sh
Check /u01/app/12.1.0.2/grid/install/root_ol7tocn2.localdomain_2015-04-06_14-54-39.log for the output of root script
#
</pre>
<p>Corresponding log is:</p>
<pre># cat /u01/app/12.1.0.2/grid/install/root_ol7tocn2.localdomain_2015-04-06_14-54-39.log
Performing root user operation.

The following environment variables are set as:
    ORACLE_OWNER= oracle
    ORACLE_HOME=  /u01/app/12.1.0.2/grid
   Copying dbhome to /usr/local/bin ...
   Copying oraenv to /usr/local/bin ...
   Copying coraenv to /usr/local/bin ...


Creating /etc/oratab file...
Entries will be added to the /etc/oratab file as needed by
Database Configuration Assistant when a database is created
Finished running generic part of root script.
Now product-specific root actions will be performed.
Using configuration parameter file: /u01/app/12.1.0.2/grid/crs/install/crsconfig_params
2015/04/06 14:54:42 CLSRSC-4001: Installing Oracle Trace File Analyzer (TFA) Collector.

2015/04/06 14:55:12 CLSRSC-4002: Successfully installed Oracle Trace File Analyzer (TFA) Collector.

2015/04/06 14:55:13 CLSRSC-363: User ignored prerequisites during installation

OLR initialization - successful
2015/04/06 14:56:30 CLSRSC-330: Adding Clusterware entries to file 'oracle-ohasd.service'

CRS-4133: Oracle High Availability Services has been stopped.
CRS-4123: Oracle High Availability Services has been started.
CRS-4133: Oracle High Availability Services has been stopped.
CRS-4123: Oracle High Availability Services has been started.
CRS-4133: Oracle High Availability Services has been stopped.
CRS-4123: Starting Oracle High Availability Services-managed resources
CRS-2672: Attempting to start 'ora.mdnsd' on 'ol7tocn2'
CRS-2672: Attempting to start 'ora.evmd' on 'ol7tocn2'
CRS-2676: Start of 'ora.evmd' on 'ol7tocn2' succeeded
CRS-2676: Start of 'ora.mdnsd' on 'ol7tocn2' succeeded
CRS-2672: Attempting to start 'ora.gpnpd' on 'ol7tocn2'
CRS-2676: Start of 'ora.gpnpd' on 'ol7tocn2' succeeded
CRS-2672: Attempting to start 'ora.gipcd' on 'ol7tocn2'
CRS-2676: Start of 'ora.gipcd' on 'ol7tocn2' succeeded
CRS-2672: Attempting to start 'ora.cssdmonitor' on 'ol7tocn2'
CRS-2676: Start of 'ora.cssdmonitor' on 'ol7tocn2' succeeded
CRS-2672: Attempting to start 'ora.cssd' on 'ol7tocn2'
CRS-2672: Attempting to start 'ora.diskmon' on 'ol7tocn2'
CRS-2676: Start of 'ora.diskmon' on 'ol7tocn2' succeeded
CRS-2676: Start of 'ora.cssd' on 'ol7tocn2' succeeded
CRS-2672: Attempting to start 'ora.cluster_interconnect.haip' on 'ol7tocn2'
CRS-2672: Attempting to start 'ora.ctssd' on 'ol7tocn2'
CRS-2676: Start of 'ora.ctssd' on 'ol7tocn2' succeeded
CRS-2676: Start of 'ora.cluster_interconnect.haip' on 'ol7tocn2' succeeded
CRS-2672: Attempting to start 'ora.asm' on 'ol7tocn2'
CRS-2676: Start of 'ora.asm' on 'ol7tocn2' succeeded
CRS-2672: Attempting to start 'ora.storage' on 'ol7tocn2'
CRS-2676: Start of 'ora.storage' on 'ol7tocn2' succeeded
CRS-2672: Attempting to start 'ora.crf' on 'ol7tocn2'
CRS-2676: Start of 'ora.crf' on 'ol7tocn2' succeeded
CRS-2672: Attempting to start 'ora.crsd' on 'ol7tocn2'
CRS-2676: Start of 'ora.crsd' on 'ol7tocn2' succeeded
CRS-6017: Processing resource auto-start for servers: ol7tocn2
CRS-2673: Attempting to stop 'ora.LISTENER_SCAN1.lsnr' on 'ol7tocn1'
CRS-2672: Attempting to start 'ora.net1.network' on 'ol7tocn2'
CRS-2677: Stop of 'ora.LISTENER_SCAN1.lsnr' on 'ol7tocn1' succeeded
CRS-2676: Start of 'ora.net1.network' on 'ol7tocn2' succeeded
CRS-2673: Attempting to stop 'ora.scan1.vip' on 'ol7tocn1'
CRS-2672: Attempting to start 'ora.ons' on 'ol7tocn2'
CRS-2677: Stop of 'ora.scan1.vip' on 'ol7tocn1' succeeded
CRS-2672: Attempting to start 'ora.scan1.vip' on 'ol7tocn2'
CRS-2676: Start of 'ora.scan1.vip' on 'ol7tocn2' succeeded
CRS-2672: Attempting to start 'ora.LISTENER_SCAN1.lsnr' on 'ol7tocn2'
CRS-2676: Start of 'ora.ons' on 'ol7tocn2' succeeded
CRS-2676: Start of 'ora.LISTENER_SCAN1.lsnr' on 'ol7tocn2' succeeded
CRS-6016: Resource auto-start has completed for server ol7tocn2
CRS-6024: Completed start of Oracle Cluster Ready Services-managed resources
CRS-4123: Oracle High Availability Services has been started.
2015/04/06 14:59:22 CLSRSC-343: Successfully started Oracle Clusterware stack

Preparing packages...
cvuqdisk-1.0.9-1.x86_64
2015/04/06 14:59:39 CLSRSC-325: Configure Oracle Grid Infrastructure for a Cluster ... succeeded

</pre>
<p>I have checked that GI is running on both cluster nodes:</p>
<pre>$ . oraenv
ORACLE_SID = [oracle] ? +ASM1
The Oracle base has been set to /u01/app/base
$ crsctl stat res -t
--------------------------------------------------------------------------------
Name           Target  State        Server                   State details
--------------------------------------------------------------------------------
Local Resources
--------------------------------------------------------------------------------
ora.LISTENER.lsnr
               ONLINE  ONLINE       ol7tocn1                 STABLE
               ONLINE  ONLINE       ol7tocn2                 STABLE
ora.OCRVD.dg
               ONLINE  ONLINE       ol7tocn1                 STABLE
               ONLINE  ONLINE       ol7tocn2                 STABLE
ora.asm
               ONLINE  ONLINE       ol7tocn1                 Started,STABLE
               ONLINE  ONLINE       ol7tocn2                 Started,STABLE
ora.net1.network
               ONLINE  ONLINE       ol7tocn1                 STABLE
               ONLINE  ONLINE       ol7tocn2                 STABLE
ora.ons
               ONLINE  ONLINE       ol7tocn1                 STABLE
               ONLINE  ONLINE       ol7tocn2                 STABLE
--------------------------------------------------------------------------------
Cluster Resources
--------------------------------------------------------------------------------
ora.LISTENER_SCAN1.lsnr
      1        ONLINE  ONLINE       ol7tocn2                 STABLE
ora.LISTENER_SCAN2.lsnr
      1        ONLINE  ONLINE       ol7tocn1                 STABLE
ora.LISTENER_SCAN3.lsnr
      1        ONLINE  ONLINE       ol7tocn1                 STABLE
ora.MGMTLSNR
      1        OFFLINE OFFLINE                               STABLE
ora.cvu
      1        ONLINE  ONLINE       ol7tocn1                 STABLE
ora.oc4j
      1        ONLINE  ONLINE       ol7tocn1                 STABLE
ora.ol7tocn1.vip
      1        ONLINE  ONLINE       ol7tocn1                 STABLE
ora.ol7tocn2.vip
      1        ONLINE  ONLINE       ol7tocn2                 STABLE
ora.scan1.vip
      1        ONLINE  ONLINE       ol7tocn2                 STABLE
ora.scan2.vip
      1        ONLINE  ONLINE       ol7tocn1                 STABLE
ora.scan3.vip
      1        ONLINE  ONLINE       ol7tocn1                 STABLE
--------------------------------------------------------------------------------
</pre>
<p>I have checked that OCR and voting disks have been created in the right disk group named +OCRVD:</p>
<pre>$ ocrcheck
Status of Oracle Cluster Registry is as follows :
         Version                  :          4
         Total space (kbytes)     :     409568
         Used space (kbytes)      :       1324
         Available space (kbytes) :     408244
         ID                       : 1335660551
         Device/File Name         :     +OCRVD
                                    Device/File integrity check succeeded

                                    Device/File not configured

                                    Device/File not configured

                                    Device/File not configured

                                    Device/File not configured

         Cluster registry integrity check succeeded

         Logical corruption check bypassed due to non-privileged user
$ crsctl query css votedisk
##  STATE    File Universal Id                File Name Disk group
--  -----    -----------------                --------- ---------
 1. ONLINE   d6f0e877483c4f66bffb3c6cab8e9a29 (/dev/asm-disk1) [OCRVD]
Located 1 voting disk(s).
$
</pre>
<p>I have run the last GI configuration scripts after creating the required response file that contains SYS password and ASMSNMP password for ASM instance:</p>
<pre>$ cat p.r
oracle.assistants.asm|S_ASMPASSWORD=oracle12c
oracle.assistants.asm|S_ASMMONITORPASSWORD=oracle12c
</pre>
<p>I have run it with oracle user account:</p>
<pre>$ /u01/app/12.1.0.2/grid/cfgtoollogs/configToolAllCommands RESPONSE_FILE=p.r
</pre>
<p>Running this script generates a large log file with many INFO and WARNING messages.<br />
The most important message is the one displayed at the end:</p>
<pre>...
You can see the log file: /u01/app/12.1.0.2/grid/cfgtoollogs/oui/configActions2015-04-06_03-03-21-PM.log
</pre>
<p>I have igored all warnings and checked <a href="https://pierreforstmanndotcom.wordpress.com/configactions2015-04-06_03-03-21-pm-log/"> in the second log file</a><br />
that each plug-in has been successfully performed with:</p>
<pre>$  grep plug-in /u01/app/12.1.0.2/grid/cfgtoollogs/oui/configActions2015-04-06_03-03-21-PM.log
The plug-in Update CRS flag in Inventory is running
The plug-in Update CRS flag in Inventory has successfully been performed
The plug-in Oracle Net Configuration Assistant is running
The plug-in Oracle Net Configuration Assistant has successfully been performed
The plug-in Automatic Storage Management Configuration Assistant is running
The plug-in Automatic Storage Management Configuration Assistant has successfully been performed
The plug-in Creating Container Database for Oracle Grid Infrastructure Management Repository is running
The plug-in Creating Container Database for Oracle Grid Infrastructure Management Repository has successfully been performed
The plug-in Setting up Oracle Grid Infrastructure Management Repository is running
The plug-in Setting up Oracle Grid Infrastructure Management Repository has successfully been performed
The plug-in MGMT Configuration Assistant is running
The plug-in MGMT Configuration Assistant has successfully been performed
The plug-in Oracle Cluster Verification Utility is running
The plug-in Oracle Cluster Verification Utility has successfully been performed
</pre>
<p>I have checked that the ora.MGMTLSNR and ora.mgmtb resources are now online:</p>
<pre>$ crsctl stat res -t
--------------------------------------------------------------------------------
Name           Target  State        Server                   State details
--------------------------------------------------------------------------------
Local Resources
--------------------------------------------------------------------------------
ora.LISTENER.lsnr
               ONLINE  ONLINE       ol7tocn1                 STABLE
               ONLINE  ONLINE       ol7tocn2                 STABLE
ora.OCRVD.dg
               ONLINE  ONLINE       ol7tocn1                 STABLE
               ONLINE  ONLINE       ol7tocn2                 STABLE
ora.asm
               ONLINE  ONLINE       ol7tocn1                 Started,STABLE
               ONLINE  ONLINE       ol7tocn2                 Started,STABLE
ora.net1.network
               ONLINE  ONLINE       ol7tocn1                 STABLE
               ONLINE  ONLINE       ol7tocn2                 STABLE
ora.ons
               ONLINE  ONLINE       ol7tocn1                 STABLE
               ONLINE  ONLINE       ol7tocn2                 STABLE
--------------------------------------------------------------------------------
Cluster Resources
--------------------------------------------------------------------------------
ora.LISTENER_SCAN1.lsnr
      1        ONLINE  ONLINE       ol7tocn2                 STABLE
ora.LISTENER_SCAN2.lsnr
      1        ONLINE  ONLINE       ol7tocn1                 STABLE
ora.LISTENER_SCAN3.lsnr
      1        ONLINE  ONLINE       ol7tocn1                 STABLE
ora.MGMTLSNR
      1        ONLINE  ONLINE       ol7tocn1                 169.254.16.18 192.16
                                                             8.43.211,STABLE
ora.cvu
      1        ONLINE  ONLINE       ol7tocn1                 STABLE
ora.mgmtdb
      1        ONLINE  ONLINE       ol7tocn1                 Open,STABLE
ora.oc4j
      1        ONLINE  ONLINE       ol7tocn1                 STABLE
ora.ol7tocn1.vip
      1        ONLINE  ONLINE       ol7tocn1                 STABLE
ora.ol7tocn2.vip
      1        ONLINE  ONLINE       ol7tocn2                 STABLE
ora.scan1.vip
      1        ONLINE  ONLINE       ol7tocn2                 STABLE
ora.scan2.vip
      1        ONLINE  ONLINE       ol7tocn1                 STABLE
ora.scan3.vip
      1        ONLINE  ONLINE       ol7tocn1                 STABLE
--------------------------------------------------------------------------------
</pre>
<p>ora.MGMTDB is the new GIMR database that is mandatory with Oracle RAC 12.1.0.2:<br />
this database and its listener have specific clusterware resource types:</p>
<pre>$ crsctl status resource ora.mgmtdb
NAME=ora.mgmtdb
TYPE=ora.mgmtdb.type
TARGET=ONLINE
STATE=ONLINE on ol7tocn1

$ crsctl status resource ora.MGMTLSNR
NAME=ora.MGMTLSNR
TYPE=ora.mgmtlsnr.type
TARGET=ONLINE
STATE=ONLINE on ol7tocn1

$
</pre>
<p>This new database instance is named -MGMTDB (note the '-' !) on first cluster node. I have set the right environment with:</p>
<pre>$ . oraenv
ORACLE_SID = [+ASM1] ? -MGMTDB
The Oracle base remains unchanged with value /u01/app/base
</pre>
<p>I have connected with SQL*Plus to check database properties:</p>
<pre>SQL&gt; select name, cdb from v$database;

NAME      CDB
--------- ---
_MGMTDB   YES

SQL&gt;

SQL&gt; show parameter instance_name

NAME                                 TYPE        VALUE
------------------------------------ ----------- ------------------------------
instance_name                        string      -MGMTDB

SQL&gt; select con_id, name from v$pdbs;

    CON_ID NAME
---------- ------------------------------
         2 PDB$SEED
         3 OL7TOC

SQL&gt; column name format a110
SQL&gt; set linesize 120
SQL&gt; select name from v$datafile union select name from v$tempfile;

NAME
--------------------------------------------------------------------------------------------------------------
+OCRVD/_MGMTDB/DATAFILE/sysaux.257.876323115
+OCRVD/_MGMTDB/DATAFILE/system.258.876323137
+OCRVD/_MGMTDB/DATAFILE/undotbs1.259.876323163
+OCRVD/_MGMTDB/FD9AC0F7C36E4438E043B6A9E80A24D5/DATAFILE/pdbseed_temp012015-04-06_03-07-33-pm.dbf
+OCRVD/_MGMTDB/FD9AC0F7C36E4438E043B6A9E80A24D5/DATAFILE/sysaux.266.876323235
+OCRVD/_MGMTDB/FD9AC0F7C36E4438E043B6A9E80A24D5/DATAFILE/system.265.876323235
+OCRVD/_MGMTDB/FD9B43BF6A646F8CE043B6A9E80A2815/DATAFILE/ol7toc_temp012015-04-06_03-13-48-pm.dbf
+OCRVD/_MGMTDB/FD9B43BF6A646F8CE043B6A9E80A2815/DATAFILE/sysaux.271.876323549
+OCRVD/_MGMTDB/FD9B43BF6A646F8CE043B6A9E80A2815/DATAFILE/sysgridhomedata.272.876323549
+OCRVD/_MGMTDB/FD9B43BF6A646F8CE043B6A9E80A2815/DATAFILE/sysmgmtdata.269.876323549
+OCRVD/_MGMTDB/FD9B43BF6A646F8CE043B6A9E80A2815/DATAFILE/sysmgmtdatadb.273.876323549

NAME
--------------------------------------------------------------------------------------------------------------
+OCRVD/_MGMTDB/FD9B43BF6A646F8CE043B6A9E80A2815/DATAFILE/system.270.876323549
+OCRVD/_MGMTDB/FD9B43BF6A646F8CE043B6A9E80A2815/DATAFILE/users.274.876323549
+OCRVD/_MGMTDB/TEMPFILE/temp.264.876323229

14 rows selected.

SQL&gt;

SQL&gt; select name from v$controlfile;

NAME
--------------------------------------------------------------------------------
+OCRVD/_MGMTDB/CONTROLFILE/current.260.876323207

SQL&gt; select member from v$logfile;

MEMBER
--------------------------------------------------------------------------------
+OCRVD/_MGMTDB/ONLINELOG/group_3.263.876323215
+OCRVD/_MGMTDB/ONLINELOG/group_2.262.876323213
+OCRVD/_MGMTDB/ONLINELOG/group_1.261.876323211

SQL&gt; archive log list;
Database log mode              No Archive Mode
Automatic archival             Disabled
Archive destination            /u01/app/12.1.0.2/grid/dbs/arch
Oldest online log sequence     3
Current log sequence           5
SQL&gt;
</pre>
<p>_MGMTDB is a multitenant database with 1 pluggable database using cluster name as name and using OCR and voting disk group storage.</p>
<h2>Oracle Database silent installation</h2>
<p>I have unzipped the media files:</p>
<pre>$ unzip linuxamd64_12102_database_1of2.zip
$ unzip linuxamd64_12102_database_2of2.zip
</pre>
<p>I have created Oracle Home directory on both nodes:</p>
<pre># mkdir -p /u01/app/12.1.0.2/db
# chown oracle:dba /u01/app/12.1.0.2/db
</pre>
<p>On first node I have run following script:</p>
<pre>cd database
export DISTRIB=`pwd`
./runInstaller -silent \
   -responseFile $DISTRIB/response/db_install.rsp      \
   oracle.install.option=INSTALL_DB_SWONLY             \
   CLUSTER_NODES=ol7tocn1,ol7tocn2                     \
   UNIX_GROUP_NAME=oinstall                            \
   SELECTED_LANGUAGES=en                               \
   ORACLE_HOME=/u01/app/12.1.0.2/db                    \
   ORACLE_BASE=/u01/app/base                           \
   oracle.install.db.InstallEdition=EE                 \
   oracle.install.db.isCustomInstall=false             \
   oracle.install.db.DBA_GROUP=dba                     \
   oracle.install.db.OPER_GROUP=dba                    \
   oracle.install.db.BACKUPDBA_GROUP=dba               \
   oracle.install.db.DGDBA_GROUP=dba                   \
   oracle.install.db.KMDBA_GROUP=dba                   \
   SECURITY_UPDATES_VIA_MYORACLESUPPORT=false          \
   DECLINE_SECURITY_UPDATES=true                       \
    -waitForCompletion
</pre>
<p>I have ignored following failed prerequisites:</p>
<pre>INFO: ------------------List of failed Tasks------------------
INFO: *********************************************
INFO: /dev/shm mounted as temporary file system: Checks whether /dev/shm is mounted correctly as temporary file system
INFO: Severity:IGNORABLE
INFO: OverallStatus:VERIFICATION_FAILED
INFO: *********************************************
INFO: Maximum locked memory check: Check maximum locked memory setting on the system
INFO: Severity:IGNORABLE
INFO: OverallStatus:VERIFICATION_FAILED
INFO: -----------------End of failed Tasks List----------------
</pre>
<p>Running this script has produced following output:</p>
<pre>Starting Oracle Universal Installer...

Checking Temp space: must be greater than 500 MB.   Actual 17722 MB    Passed
Checking swap space: must be greater than 150 MB.   Actual 3962 MB    Passed
Preparing to launch Oracle Universal Installer from /tmp/OraInstall2015-04-06_05-07-00PM. Please wait ...[WARNING] [INS-32018] The selected Oracle home is outside of Oracle base.
   ACTION: Oracle recommends installing Oracle software within the Oracle base directory. Adjust the Oracle home or Oracle base accordingly.
[WARNING] [INS-13014] Target environment does not meet some optional requirements.
   CAUSE: Some of the optional prerequisites are not met. See logs for details. /u01/app/oraInventory/logs/installActions2015-04-06_05-07-00PM.log
   ACTION: Identify the list of failed prerequisite checks from the log: /u01/app/oraInventory/logs/installActions2015-04-06_05-07-00PM.log. Then either from the log file or from installation manual find the appropriate configuration to meet the prerequisites and fix it manually.
You can find the log of this install session at:
 /u01/app/oraInventory/logs/installActions2015-04-06_05-07-00PM.log
The installation of Oracle Database 12c was successful.
Please check '/u01/app/oraInventory/logs/silentInstall2015-04-06_05-07-00PM.log' for more details.

As a root user, execute the following script(s):
        1. /u01/app/12.1.0.2/db/root.sh

Execute /u01/app/12.1.0.2/db/root.sh on the following nodes:
[ol7tocn1, ol7tocn2]


Successfully Setup Software.

</pre>
<p>I have run root.sh on first node ...</p>
<pre># /u01/app/12.1.0.2/db/root.sh
Check /u01/app/12.1.0.2/db/install/root_ol7tocn1.localdomain_2015-04-06_17-45-42.log for the output of root script
# cat /u01/app/12.1.0.2/db/install/root_ol7tocn1.localdomain_2015-04-06_17-45-42.log
Performing root user operation.

The following environment variables are set as:
    ORACLE_OWNER= oracle
    ORACLE_HOME=  /u01/app/12.1.0.2/db
   Copying dbhome to /usr/local/bin ...
   Copying oraenv to /usr/local/bin ...
   Copying coraenv to /usr/local/bin ...

Entries will be added to the /etc/oratab file as needed by
Database Configuration Assistant when a database is created
Finished running generic part of root script.
Now product-specific root actions will be performed.
#
</pre>
<p>... and on second node:</p>
<pre># /u01/app/12.1.0.2/db/root.sh
Check /u01/app/12.1.0.2/db/install/root_ol7tocn2.localdomain_2015-04-06_17-46-14.log for the output of root script
# cat /u01/app/12.1.0.2/db/install/root_ol7tocn2.localdomain_2015-04-06_17-46-14.log
Performing root user operation.

The following environment variables are set as:
    ORACLE_OWNER= oracle
    ORACLE_HOME=  /u01/app/12.1.0.2/db
   Copying dbhome to /usr/local/bin ...
   Copying oraenv to /usr/local/bin ...
   Copying coraenv to /usr/local/bin ...

Entries will be added to the /etc/oratab file as needed by
Database Configuration Assistant when a database is created
Finished running generic part of root script.
Now product-specific root actions will be performed.
#
</pre>
<h3>Fast Recovery Area (FRA) disk group creation</h3>
<p>I have switched to oracle account to create FRA disk group that will be used for database creation.</p>
<p>First I have set current instance to ASM instance on first cluster node:</p>
<pre>$ . oraenv
ORACLE_SID = [oracle] ? +ASM1
The Oracle base has been set to /u01/app/base
</pre>
<p>I have connected to ASM instance and created disk group using second disk device created during OS configuration steps:</p>
<pre>$ sqlplus / as sysasm

SQL*Plus: Release 12.1.0.2.0 Production on Mon Apr 6 17:46:50 2015

Copyright (c) 1982, 2014, Oracle.  All rights reserved.


Connected to:
Oracle Database 12c Enterprise Edition Release 12.1.0.2.0 - 64bit Production
With the Real Application Clusters and Automatic Storage Management options

SQL&gt; create diskgroup FRA external redundancy disk '/dev/asm-disk2';

Diskgroup created.

SQL&gt; 
</pre>
<p>I have checked that disk group resource ora.FRA.dg has been added to OCR:</p>
<pre>$ crsctl stat res -t
--------------------------------------------------------------------------------
Name           Target  State        Server                   State details
--------------------------------------------------------------------------------
Local Resources
--------------------------------------------------------------------------------
ora.FRA.dg
               ONLINE  ONLINE       ol7tocn1                 STABLE
               OFFLINE OFFLINE      ol7tocn2                 STABLE
ora.LISTENER.lsnr
               ONLINE  ONLINE       ol7tocn1                 STABLE
               ONLINE  ONLINE       ol7tocn2                 STABLE
ora.OCRVD.dg
               ONLINE  ONLINE       ol7tocn1                 STABLE
               ONLINE  ONLINE       ol7tocn2                 STABLE
ora.asm
               ONLINE  ONLINE       ol7tocn1                 Started,STABLE
               ONLINE  ONLINE       ol7tocn2                 Started,STABLE
ora.net1.network
               ONLINE  ONLINE       ol7tocn1                 STABLE
               ONLINE  ONLINE       ol7tocn2                 STABLE
ora.ons
               ONLINE  ONLINE       ol7tocn1                 STABLE
               ONLINE  ONLINE       ol7tocn2                 STABLE
--------------------------------------------------------------------------------
Cluster Resources
--------------------------------------------------------------------------------
ora.LISTENER_SCAN1.lsnr
      1        ONLINE  ONLINE       ol7tocn2                 STABLE
ora.LISTENER_SCAN2.lsnr
      1        ONLINE  ONLINE       ol7tocn1                 STABLE
ora.LISTENER_SCAN3.lsnr
      1        ONLINE  ONLINE       ol7tocn1                 STABLE
ora.MGMTLSNR
      1        ONLINE  ONLINE       ol7tocn1                 169.254.16.18 192.16
                                                             8.43.211,STABLE
ora.cvu
      1        ONLINE  ONLINE       ol7tocn1                 STABLE
ora.mgmtdb
      1        ONLINE  ONLINE       ol7tocn1                 Open,STABLE
ora.oc4j
      1        ONLINE  ONLINE       ol7tocn1                 STABLE
ora.ol7tocn1.vip
      1        ONLINE  ONLINE       ol7tocn1                 STABLE
ora.ol7tocn2.vip
      1        ONLINE  ONLINE       ol7tocn2                 STABLE
ora.scan1.vip
      1        ONLINE  ONLINE       ol7tocn2                 STABLE
ora.scan2.vip
      1        ONLINE  ONLINE       ol7tocn1                 STABLE
ora.scan3.vip
      1        ONLINE  ONLINE       ol7tocn1                 STABLE
--------------------------------------------------------------------------------
</pre>
<p>I have started disk group on cluster node 2:</p>
<pre>$ srvctl start diskgroup -diskgroup FRA
$ srvctl status diskgroup -diskgroup FRA
Disk Group FRA is running on ol7tocn2,ol7tocn1
</pre>
<h3>Database files disk group creation</h3>
<p>I have run similar steps for last ASM disk group.</p>
<pre>$ sqlplus / as sysasm

SQL*Plus: Release 12.1.0.2.0 Production on Mon Apr 6 17:48:54 2015

Copyright (c) 1982, 2014, Oracle.  All rights reserved.


Connected to:
Oracle Database 12c Enterprise Edition Release 12.1.0.2.0 - 64bit Production
With the Real Application Clusters and Automatic Storage Management options

SQL&gt; create diskgroup DATA external redundancy disk '/dev/asm-disk3';

Diskgroup created.

SQL&gt; Disconnected from Oracle Database 12c Enterprise Edition Release 12.1.0.2.0 - 64bit Production
With the Real Application Clusters and Automatic Storage Management options
$ crsctl stat res -t
--------------------------------------------------------------------------------
Name           Target  State        Server                   State details
--------------------------------------------------------------------------------
Local Resources
--------------------------------------------------------------------------------
ora.DATA.dg
               ONLINE  ONLINE       ol7tocn1                 STABLE
               OFFLINE OFFLINE      ol7tocn2                 STABLE
ora.FRA.dg
               ONLINE  ONLINE       ol7tocn1                 STABLE
               ONLINE  ONLINE       ol7tocn2                 STABLE
ora.LISTENER.lsnr
               ONLINE  ONLINE       ol7tocn1                 STABLE
               ONLINE  ONLINE       ol7tocn2                 STABLE
ora.OCRVD.dg
               ONLINE  ONLINE       ol7tocn1                 STABLE
               ONLINE  ONLINE       ol7tocn2                 STABLE
ora.asm
               ONLINE  ONLINE       ol7tocn1                 Started,STABLE
               ONLINE  ONLINE       ol7tocn2                 Started,STABLE
ora.net1.network
               ONLINE  ONLINE       ol7tocn1                 STABLE
               ONLINE  ONLINE       ol7tocn2                 STABLE
ora.ons
               ONLINE  ONLINE       ol7tocn1                 STABLE
               ONLINE  ONLINE       ol7tocn2                 STABLE
--------------------------------------------------------------------------------
Cluster Resources
--------------------------------------------------------------------------------
ora.LISTENER_SCAN1.lsnr
      1        ONLINE  ONLINE       ol7tocn2                 STABLE
ora.LISTENER_SCAN2.lsnr
      1        ONLINE  ONLINE       ol7tocn1                 STABLE
ora.LISTENER_SCAN3.lsnr
      1        ONLINE  ONLINE       ol7tocn1                 STABLE
ora.MGMTLSNR
      1        ONLINE  ONLINE       ol7tocn1                 169.254.16.18 192.16
                                                             8.43.211,STABLE
ora.cvu
      1        ONLINE  ONLINE       ol7tocn1                 STABLE
ora.mgmtdb
      1        ONLINE  ONLINE       ol7tocn1                 Open,STABLE
ora.oc4j
      1        ONLINE  ONLINE       ol7tocn1                 STABLE
ora.ol7tocn1.vip
      1        ONLINE  ONLINE       ol7tocn1                 STABLE
ora.ol7tocn2.vip
      1        ONLINE  ONLINE       ol7tocn2                 STABLE
ora.scan1.vip
      1        ONLINE  ONLINE       ol7tocn2                 STABLE
ora.scan2.vip
      1        ONLINE  ONLINE       ol7tocn1                 STABLE
ora.scan3.vip
      1        ONLINE  ONLINE       ol7tocn1                 STABLE
--------------------------------------------------------------------------------
$ srvctl start diskgroup -diskgroup DATA
$ srvctl status diskgroup -diskgroup DATA
Disk Group DATA is running on ol7tocn2,ol7tocn1
$ crsctl stat res -t
--------------------------------------------------------------------------------
Name           Target  State        Server                   State details
--------------------------------------------------------------------------------
Local Resources
--------------------------------------------------------------------------------
ora.DATA.dg
               ONLINE  ONLINE       ol7tocn1                 STABLE
               ONLINE  ONLINE       ol7tocn2                 STABLE
ora.FRA.dg
               ONLINE  ONLINE       ol7tocn1                 STABLE
               ONLINE  ONLINE       ol7tocn2                 STABLE
ora.LISTENER.lsnr
               ONLINE  ONLINE       ol7tocn1                 STABLE
               ONLINE  ONLINE       ol7tocn2                 STABLE
ora.OCRVD.dg
               ONLINE  ONLINE       ol7tocn1                 STABLE
               ONLINE  ONLINE       ol7tocn2                 STABLE
ora.asm
               ONLINE  ONLINE       ol7tocn1                 Started,STABLE
               ONLINE  ONLINE       ol7tocn2                 Started,STABLE
ora.net1.network
               ONLINE  ONLINE       ol7tocn1                 STABLE
               ONLINE  ONLINE       ol7tocn2                 STABLE
ora.ons
               ONLINE  ONLINE       ol7tocn1                 STABLE
               ONLINE  ONLINE       ol7tocn2                 STABLE
--------------------------------------------------------------------------------
Cluster Resources
--------------------------------------------------------------------------------
ora.LISTENER_SCAN1.lsnr
      1        ONLINE  ONLINE       ol7tocn2                 STABLE
ora.LISTENER_SCAN2.lsnr
      1        ONLINE  ONLINE       ol7tocn1                 STABLE
ora.LISTENER_SCAN3.lsnr
      1        ONLINE  ONLINE       ol7tocn1                 STABLE
ora.MGMTLSNR
      1        ONLINE  ONLINE       ol7tocn1                 169.254.16.18 192.16
                                                             8.43.211,STABLE
ora.cvu
      1        ONLINE  ONLINE       ol7tocn1                 STABLE
ora.mgmtdb
      1        ONLINE  ONLINE       ol7tocn1                 Open,STABLE
ora.oc4j
      1        ONLINE  ONLINE       ol7tocn1                 STABLE
ora.ol7tocn1.vip
      1        ONLINE  ONLINE       ol7tocn1                 STABLE
ora.ol7tocn2.vip
      1        ONLINE  ONLINE       ol7tocn2                 STABLE
ora.scan1.vip
      1        ONLINE  ONLINE       ol7tocn2                 STABLE
ora.scan2.vip
      1        ONLINE  ONLINE       ol7tocn1                 STABLE
ora.scan3.vip
      1        ONLINE  ONLINE       ol7tocn1                 STABLE
--------------------------------------------------------------------------------
$
</pre>
<p>All disk groups are now started on each cluster node:</p>
<pre>$ crsctl stat res -t
--------------------------------------------------------------------------------
Name           Target  State        Server                   State details
--------------------------------------------------------------------------------
Local Resources
--------------------------------------------------------------------------------
ora.DATA.dg
               ONLINE  ONLINE       ol7tocn1                 STABLE
               ONLINE  ONLINE       ol7tocn2                 STABLE
ora.FRA.dg
               ONLINE  ONLINE       ol7tocn1                 STABLE
               ONLINE  ONLINE       ol7tocn2                 STABLE
ora.LISTENER.lsnr
               ONLINE  ONLINE       ol7tocn1                 STABLE
               ONLINE  ONLINE       ol7tocn2                 STABLE
ora.OCRVD.dg
               ONLINE  ONLINE       ol7tocn1                 STABLE
               ONLINE  ONLINE       ol7tocn2                 STABLE
ora.asm
               ONLINE  ONLINE       ol7tocn1                 Started,STABLE
               ONLINE  ONLINE       ol7tocn2                 Started,STABLE
ora.net1.network
               ONLINE  ONLINE       ol7tocn1                 STABLE
               ONLINE  ONLINE       ol7tocn2                 STABLE
ora.ons
               ONLINE  ONLINE       ol7tocn1                 STABLE
               ONLINE  ONLINE       ol7tocn2                 STABLE
--------------------------------------------------------------------------------
Cluster Resources
--------------------------------------------------------------------------------
ora.LISTENER_SCAN1.lsnr
      1        ONLINE  ONLINE       ol7tocn2                 STABLE
ora.LISTENER_SCAN2.lsnr
      1        ONLINE  ONLINE       ol7tocn1                 STABLE
ora.LISTENER_SCAN3.lsnr
      1        ONLINE  ONLINE       ol7tocn1                 STABLE
ora.MGMTLSNR
      1        ONLINE  ONLINE       ol7tocn1                 169.254.16.18 192.16
                                                             8.43.211,STABLE
ora.cvu
      1        ONLINE  ONLINE       ol7tocn1                 STABLE
ora.mgmtdb
      1        ONLINE  ONLINE       ol7tocn1                 Open,STABLE
ora.oc4j
      1        ONLINE  ONLINE       ol7tocn1                 STABLE
ora.ol7tocn1.vip
      1        ONLINE  ONLINE       ol7tocn1                 STABLE
ora.ol7tocn2.vip
      1        ONLINE  ONLINE       ol7tocn2                 STABLE
ora.scan1.vip
      1        ONLINE  ONLINE       ol7tocn2                 STABLE
ora.scan2.vip
      1        ONLINE  ONLINE       ol7tocn1                 STABLE
ora.scan3.vip
      1        ONLINE  ONLINE       ol7tocn1                 STABLE
--------------------------------------------------------------------------------
$
</pre>
<p>I have changed disk groups compatibility to make sure that I can create a 12.1.0.2 database.</p>
<p>I have run a SYSASM connection to local ASM instance:</p>
<pre>SQL&gt; select name, compatibility, database_compatibility from v$asm_diskgroup;


NAME                           COMPATIBILITY        DATABASE_COMPATIBILITY
------------------------------ -------------------- ------------------------------------------------------------
OCRVD                          12.1.0.0.0           10.1.0.0.0
FRA                            10.1.0.0.0           10.1.0.0.0
DATA                           10.1.0.0.0           10.1.0.0.0

QL&gt; alter diskgroup DATA set attribute 'compatible.asm'='12.1.0.0';

Diskgroup altered.

SQL&gt; alter diskgroup DATA set attribute 'compatible.rdbms'='12.1.0.0.';

Diskgroup altered.

SQL&gt;  alter diskgroup FRA set attribute 'compatible.asm'='12.1.0.0.';

Diskgroup altered.

SQL&gt;  alter diskgroup FRA set attribute 'compatible.asm'='12.1.0.0.';

Diskgroup altered.

SQL&gt; alter diskgroup FRA set attribute 'compatible.rdbms'='12.1.0.0.';

Diskgroup altered.


SQL&gt;  select name, compatibility, database_compatibility from v$asm_diskgroup;

NAME                           COMPATIBILITY        DATABASE_COMPATIBILITY
------------------------------ -------------------- ------------------------------------------------------------
OCRVD                          12.1.0.0.0           10.1.0.0.0
FRA                            12.1.0.0.0           12.1.0.0.0
DATA                           12.1.0.0.0           12.1.0.0.0

</pre>
<h3>RAC database creation</h3>
<p>I have run following script to a container database named cdbrac (lowercase) with 2 pluggable databasesnamed pdb1 and pdb2:</p>
<pre>/u01/app/12.1.0.2/db/bin/dbca \
 -silent \
 -nodelist ol7tocn1,ol7tocn2 \
 -createDatabase \
 -templateName General_Purpose.dbc   \
 -gdbName cdbrac \
 -createAsContainerDatabase true \
 -numberOfPdbs 2 \
 -pdbName pdb \
 -pdbadminUsername pdba \
 -pdbadminPassword oracle12c \
 -SysPassword oracle12c \
 -SystemPassword oracle12c \
 -emConfiguration NONE \
 -storageType ASM \
 -asmSysPassword oracle12c \
 -diskGroupName DATA \
 -characterSet AL32UTF8 \
 -totalMemory 1024 \
 -recoveryGroupName FRA
</pre>
<p>This script has printed following output:</p>
<pre>Copying database files
1% complete
2% complete
6% complete
11% complete
16% complete
20% complete
23% complete
Creating and starting Oracle instance
24% complete
27% complete
28% complete
29% complete
32% complete
35% complete
36% complete
38% complete
Creating cluster database views
40% complete
54% complete
Completing Database Creation
56% complete
58% complete
65% complete
72% complete
77% complete
Creating Pluggable Databases
81% complete
86% complete
100% complete
Look at the log file "/u01/app/base/cfgtoollogs/dbca/cdbrac/cdbrac.log" for further details.
</pre>
<p>I have fixed <b>/etc/oratab</b> on both nodes to replace database name with instance name on first node ...:</p>
<pre>$ tail -n3 /etc/oratab
+ASM1:/u01/app/12.1.0.2/grid:N          # line added by Agent
-MGMTDB:/u01/app/12.1.0.2/grid:N                # line added by Agent
cdbrac1:/u01/app/12.1.0.2/db:N          # line added by Agent
</pre>
<p>... and on node 2:</p>
<pre>$ tail -n3 /etc/oratab
#
+ASM2:/u01/app/12.1.0.2/grid:N          # line added by Agent
cdbrac2:/u01/app/12.1.0.2/db:N          # line added by Agent
</pre>
<p>I have connected to database instance to check database file location:</p>
<pre>SQL&gt; select con_id, name from v$datafile order by 1;

    CON_ID NAME
---------- --------------------------------------------------------------------------------
         1 +DATA/CDBRAC/DATAFILE/system.258.876333465
         1 +DATA/CDBRAC/DATAFILE/sysaux.257.876333427
         1 +DATA/CDBRAC/DATAFILE/undotbs1.260.876333513
         1 +DATA/CDBRAC/DATAFILE/undotbs2.268.876334455
         1 +DATA/CDBRAC/DATAFILE/users.259.876333509
         2 +DATA/CDBRAC/FD9AC20F64D244D7E043B6A9E80A2F2F/DATAFILE/sysaux.265.876333655
         2 +DATA/CDBRAC/FD9AC20F64D244D7E043B6A9E80A2F2F/DATAFILE/system.266.876333655
         3 +DATA/CDBRAC/1311E05D3BB80811E053BF38A8C07D21/DATAFILE/system.272.876335713
         3 +DATA/CDBRAC/1311E05D3BB80811E053BF38A8C07D21/DATAFILE/sysaux.273.876335715
         3 +DATA/CDBRAC/1311E05D3BB80811E053BF38A8C07D21/DATAFILE/users.275.876335967
         4 +DATA/CDBRAC/1311F20653190EF7E053BF38A8C0056A/DATAFILE/users.279.876336135

    CON_ID NAME
---------- --------------------------------------------------------------------------------
         4 +DATA/CDBRAC/1311F20653190EF7E053BF38A8C0056A/DATAFILE/system.277.876336023
         4 +DATA/CDBRAC/1311F20653190EF7E053BF38A8C0056A/DATAFILE/sysaux.276.876336023

13 rows selected.

SQL&gt;
SQL&gt;  select con_id, name from v$controlfile order by 1;

    CON_ID NAME
---------- --------------------------------------------------------------------------------
         0 +FRA/CDBRAC/CONTROLFILE/current.256.876333585
         0 +DATA/CDBRAC/CONTROLFILE/current.261.876333585

SQL&gt;


SQL&gt; column member format a50
SQL&gt; select l.con_id, l.group#, l.thread#, lf.member
from v$log l, v$logfile lf
where l.group# = lf.group#
order by 1,2;  2    3    4

    CON_ID     GROUP#    THREAD# MEMBER
---------- ---------- ---------- --------------------------------------------------
         0          1          1 +FRA/CDBRAC/ONLINELOG/group_1.257.876333597
         0          1          1 +DATA/CDBRAC/ONLINELOG/group_1.262.876333593
         0          2          1 +FRA/CDBRAC/ONLINELOG/group_2.258.876333607
         0          2          1 +DATA/CDBRAC/ONLINELOG/group_2.263.876333601
         0          3          2 +DATA/CDBRAC/ONLINELOG/group_3.269.876334781
         0          3          2 +FRA/CDBRAC/ONLINELOG/group_3.259.876334785
         0          4          2 +DATA/CDBRAC/ONLINELOG/group_4.270.876334789
         0          4          2 +FRA/CDBRAC/ONLINELOG/group_4.260.876334795

8 rows selected.

SQL&gt;

</pre>
<p>I have exited SQL*Plus and check database configuration OCR:</p>
<pre>$ srvctl config database -d cdbrac
Database unique name: cdbrac
Database name: cdbrac
Oracle home: /u01/app/12.1.0.2/db
Oracle user: oracle
Spfile: +DATA/CDBRAC/PARAMETERFILE/spfile.271.876334799
Password file: +DATA/CDBRAC/PASSWORD/pwdcdbrac.256.876333349
Domain:
Start options: open
Stop options: immediate
Database role: PRIMARY
Management policy: AUTOMATIC
Server pools:
Disk Groups: FRA,DATA
Mount point paths:
Services:
Type: RAC
Start concurrency:
Stop concurrency:
OSDBA group: dba
OSOPER group: dba
Database instances: cdbrac1,cdbrac2
Configured nodes: ol7tocn1,ol7tocn2
Database is administrator managed
</pre>
<p>Note that password file is by default stored in database disk group.</p>
<p>I have also checked that crsctl displays now all resources including the new database:</p>
<pre>$ crsctl stat res -t
--------------------------------------------------------------------------------
Name           Target  State        Server                   State details
--------------------------------------------------------------------------------
Local Resources
--------------------------------------------------------------------------------
ora.DATA.dg
               ONLINE  ONLINE       ol7tocn1                 STABLE
               ONLINE  ONLINE       ol7tocn2                 STABLE
ora.FRA.dg
               ONLINE  ONLINE       ol7tocn1                 STABLE
               ONLINE  ONLINE       ol7tocn2                 STABLE
ora.LISTENER.lsnr
               ONLINE  ONLINE       ol7tocn1                 STABLE
               ONLINE  ONLINE       ol7tocn2                 STABLE
ora.OCRVD.dg
               ONLINE  ONLINE       ol7tocn1                 STABLE
               ONLINE  ONLINE       ol7tocn2                 STABLE
ora.asm
               ONLINE  ONLINE       ol7tocn1                 Started,STABLE
               ONLINE  ONLINE       ol7tocn2                 Started,STABLE
ora.net1.network
               ONLINE  ONLINE       ol7tocn1                 STABLE
               ONLINE  ONLINE       ol7tocn2                 STABLE
ora.ons
               ONLINE  ONLINE       ol7tocn1                 STABLE
               ONLINE  ONLINE       ol7tocn2                 STABLE
--------------------------------------------------------------------------------
Cluster Resources
--------------------------------------------------------------------------------
ora.LISTENER_SCAN1.lsnr
      1        ONLINE  ONLINE       ol7tocn2                 STABLE
ora.LISTENER_SCAN2.lsnr
      1        ONLINE  ONLINE       ol7tocn1                 STABLE
ora.LISTENER_SCAN3.lsnr
      1        ONLINE  ONLINE       ol7tocn1                 STABLE
ora.MGMTLSNR
      1        ONLINE  ONLINE       ol7tocn1                 169.254.16.18 192.16
                                                             8.43.211,STABLE
ora.cdbrac.db
      1        ONLINE  ONLINE       ol7tocn1                 Open,STABLE
      2        ONLINE  ONLINE       ol7tocn2                 Open,STABLE
ora.cvu
      1        ONLINE  ONLINE       ol7tocn1                 STABLE
ora.mgmtdb
      1        ONLINE  ONLINE       ol7tocn1                 Open,STABLE
ora.oc4j
      1        ONLINE  ONLINE       ol7tocn1                 STABLE
ora.ol7tocn1.vip
      1        ONLINE  ONLINE       ol7tocn1                 STABLE
ora.ol7tocn2.vip
      1        ONLINE  ONLINE       ol7tocn2                 STABLE
ora.scan1.vip
      1        ONLINE  ONLINE       ol7tocn2                 STABLE
ora.scan2.vip
      1        ONLINE  ONLINE       ol7tocn1                 STABLE
ora.scan3.vip
      1        ONLINE  ONLINE       ol7tocn1                 STABLE
--------------------------------------------------------------------------------
$
</pre>
<p>And I have rebooted both cluster node to check to each resource is started automatically: this is the case after about 10 minutes.</p>
<p>The 2-node RAC 12.1.0.2 cluster on Oracle Linux 7.1 is now ready.</p>
<p>UPDATED: 30-JUN-2014: fixed ORACLE_BASE=/u01/app/base for Oracle Database silent installation step.</p>
